<!DOCTYPE html>
<html>
<head>
    <title>MQTTX</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <style>
        button { padding: 10px 20px; font-size: 16px; margin: 10px; }
        .on { background: #4CAF50; color: white; }
        .off { background: #f44336; color: white; }
    </style>
</head>
<body>
    <h1>ESP8266</h1>
    <button class="on" onclick="sendCommand('on')">开灯</button>
    <button class="off" onclick="sendCommand('off')">关灯</button>

    <script>
        const client = mqtt.connect("wss://broker.emqx.io:8084/mqtt", {
            clientId: "web-client-" + Math.random().toString(16).substr(2, 8)
        });

        function sendCommand(cmd) {
            client.publish("home/led", cmd);
            console.log("已发送指令:", cmd);
        }

        client.on("connect", () => {
            console.log("MQTT已连接");
        });
    </script>
</body>
</html>
